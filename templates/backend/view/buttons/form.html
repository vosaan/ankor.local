<div class="content-box">

	<h1><?= $Button->Id ? 'Редактирование кнопки' : 'Добавление кнопки' ?></h1>
	
	<? if ( count( $Error ) ) : ?>
	<blockquote class="error"><?= nl2br( htmlspecialchars( implode( "\n", $Error ) ) ) ?></blockquote>
	<? endif; ?>
	
	<form action="" method="post" id="edit-form" enctype="multipart/form-data">

	<fieldset>

		<table width="100%" cellpadding="0" cellspacing="4">
		<tr>
			<th width="200">Заголовок</th>
			<td><textarea name="Name" cols="40" rows="2" class="wide focus"><?= htmlspecialchars( $Button->Name ) ?></textarea></td>
		</tr>
		<tr>
			<th>Ссылка (страница)</th>
			<td><input type="text" name="Link" value="<?= htmlspecialchars( $Button->Link ) ?>" class="wide" /></td>
		</tr>
		<tr>
			<th>Изображение</th>
			<td>
				<input type="file" name="file" /> 
				<? if ( $Button->IsFile ) : ?>
				<input type="checkbox" name="detach" value="1" /> <small>удалить картинку</small>
				<? endif; ?>
				<br />
				<em class="comment"><?= File::getAllowedExt( $Button ) ?></em>
			</td>
		</tr>
		<? if ( $Button->IsFile ) : ?>
		<tr>
			<th>&nbsp;</th>
			<td><img src="<?= File::url( $Button ) ?>" alt="" /></td>
		</tr>
		<? endif; ?>
		</table>
		
		<div class="form-buttons">
			<button type="submit" name="submit" class="submit">Сохранить</button>
			<button type="button" name="cancel" class="cancel" href="<?= $this->getLink('', true) ?>">Отмена</button>
		</div>
		
	</fieldset>
	
	</form>
	
	
</div>

<script type="text/javascript">
<!--
(function($){
	
	var $form = $('#edit-form');
	
	$form.find('button.cancel').click(function(){
		redirect($(this).attr('href'));
	});
	
})(jQuery);
//-->
</script>
