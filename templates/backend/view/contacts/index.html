<div class="content-box">

	<h1>Контактная информация</h1>
	
	<div class="add">
		<a href="<?= $this->getLink('change') ?>">Редактировать отделы</a>
		
		<div class="departments">
			<?= htmlspecialchars( implode( ", ", Contact::getDepartments('Name') ) ) ?>
		</div>
	</div>
	
	<div class="add">
		<a href="<?= $this->getLink('map') ?>">Редактировать карту</a>
		
		<div class="">
			<?= htmlspecialchars( Config::get('contact/map') ) ?>
		</div>
	</div>
	
	<div class="add">
		<a href="<?= $this->getLink('add') ?>">Добавить контакт</a>
	</div>

	<table width="100%" cellpadding="0" cellspacing="0" class="data-list">
	<thead>
	<tr>
		<td>Город</td>
		<td width="150">Подпись</td>
		<td width="450">Адрес и телефоны</td>
		<td width="150">E-mail</td>
		<td width="120">&nbsp;</td>
	</tr>
	</thead>
	</table>
	
	<div id="contacts-list">
		<ul class="ui-sortable">
			<? foreach ( $Contacts as $Contact ) : ?>
			<li value="<?= $Contact->Id ?>">
				<table width="100%" cellpadding="0" cellspacing="0" class="data-list">
				<tr>
					<td class="ui-movable-icon"><?= htmlspecialchars( $Contact->City ) ?></td>
					<td width="150"><?= htmlspecialchars( $Contact->Label ) ?></td>
					<td width="450"><?= nl2br(htmlspecialchars( $Contact->Description )) ?></td>
					<td width="150"><?= htmlspecialchars( $Contact->Email ) ?></td>
					<td width="120" class="actions">
					<a href="<?= $this->getLink('edit/'.$Contact->Id) ?>">изменить</a> | 
					<a href="<?= $this->getLink('delete/'.$Contact->Id.'#delete') ?>">удалить</a>
					</td>
				</tr>
				</table>
			</li>
			<? endforeach; ?>
		</ul>
	</div>
	
</div>


<script type="text/javascript">
<!--
(function($){
	
	$('#contacts-list').jFilterList({
		'wrapper'	: '.content-box',
		'posUrl'	: '<?= $this->getLink('pos') ?>',
		'txtDelete'	: 'Вы действительно хотите удалить текущий элемент?'
	});

})(jQuery);
//-->
</script>
